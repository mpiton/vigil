# üõ°Ô∏è Vigil ‚Äî AI-Powered Linux System Guardian

Vigil surveille en continu vos processus, RAM, CPU, disques et journaux syst√®me.
Il d√©tecte les anomalies et propose des corrections intelligentes via Claude AI
pour emp√™cher votre PC de ralentir ou crasher.

## Le probl√®me

Vous utilisez Claude Code, des MCP servers, ou d'autres outils de dev qui cr√©ent
des processus en arri√®re-plan. Parfois ces processus ne se terminent pas proprement
et s'accumulent silencieusement jusqu'√† saturer votre RAM ‚Üí freeze ‚Üí crash.

**Vigil d√©tecte √ßa et vous alerte avant que √ßa ne d√©g√©n√®re.**

## Fonctionnalit√©s

- üìä **Monitoring continu** ‚Äî RAM, CPU, swap, disques, processus, journaux
- üîç **D√©tection de processus fant√¥mes** ‚Äî identifie les MCP/Python/Node orphelins
- üßü **D√©tection de zombies** ‚Äî processus zombie qui consomment des ressources
- ü§ñ **Analyse IA** ‚Äî Claude explique le probl√®me et propose des solutions
- üîî **Notifications** ‚Äî terminal, desktop, logs JSON, webhooks
- ‚ö° **Mode auto** ‚Äî ex√©cute automatiquement les actions s√ªres

## Installation

### Compilation

```bash
git clone <repo_url>
cd vigil
cargo build --release
```

### Service systemd (recommand√©)

```bash
# Installer le binaire, le service et la config
sudo make install

# Activer le d√©marrage automatique
sudo systemctl enable vigil

# D√©marrer le service
sudo systemctl start vigil

# V√©rifier le statut
systemctl status vigil

# Consulter les logs
journalctl -u vigil -f
```

### Installation manuelle

```bash
# Copier le binaire
sudo install -m 0755 target/release/vigil /usr/local/bin/

# Copier le service systemd
sudo install -m 0644 contrib/vigil.service /etc/systemd/system/

# Cr√©er le dossier de config et copier la config par d√©faut
sudo mkdir -p /etc/vigil
sudo cp config.default.toml /etc/vigil/config.toml

# Recharger systemd
sudo systemctl daemon-reload
```

### D√©sinstallation

```bash
sudo make uninstall
# Optionnel : supprimer la config
sudo rm -rf /etc/vigil
```

## Utilisation

```bash
# Scan instantan√© du syst√®me
vigil scan

# Scan avec analyse IA
vigil scan --ai

# Status rapide
vigil status

# Lancer le daemon (surveillance continue)
vigil

# Expliquer un processus suspect
vigil explain 12345

# Tuer un processus
vigil kill 12345
vigil kill 12345 --force

# Voir/√©diter la config
vigil config
vigil config --edit
```

## Configuration

En mode utilisateur, la config est cr√©√©e automatiquement dans `~/.config/vigil/config.toml`.
En mode service systemd, la config se trouve dans `/etc/vigil/config.toml` (install√©e par `sudo make install`).

```toml
[general]
mode = "suggest"     # observe | suggest | auto
interval_secs = 5

[thresholds]
ram_warn_percent = 80
ram_critical_percent = 90
max_duplicate_processes = 5

[ai]
enabled = true
provider = "claude-cli"  # claude-cli | ollama | noop
model = "claude-sonnet-4-20250514"
cooldown_secs = 60
```

## Pr√©requis

- Linux (Ubuntu/Fedora/Arch/NixOS)
- Rust 1.75+
- `claude` CLI (pour l'analyse IA via abonnement Claude) **ou** Ollama (pour un LLM local)
- `journalctl` accessible (pour les logs syst√®me)
- `libdbus` (pour les notifications desktop)

## Architecture

Voir [ARCHITECTURE.md](ARCHITECTURE.md) pour les d√©tails techniques complets.

## License

MIT
